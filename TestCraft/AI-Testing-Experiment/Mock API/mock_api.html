<!DOCTYPE html>
 <html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock AI Testing API</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#10b981',
                        'background': '#f9fafb',
                        'card': '#ffffff',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        .loading-dot {
            animation: bounce 1s infinite alternate;
        }
        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-8px); }
        }
    </style>
 </head>
 <body class="bg-background min-h-screen p-4 sm:p-8 font-sans">
    <div id="app" class="max-w-4xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">AI Testing API 
Sandbox</h1>
            <p class="text-gray-600">Mock endpoints for testing AI QA tools 
(latency included!).</p>
        </header>
        <main class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- API Interaction Cards -->
            <div class="lg:col-span-1 space-y-6">
                
                <!-- Endpoint 1: Text Generation (Simulates LLM) -->
                <div id="card-generate-text" class="bg-card p-6 rounded-xl 
shadow-lg border border-gray-100">
                    <h2 class="text-xl font-semibold text-primary mb-3">1. /api/
 generate_text</h2>
                    <p class="text-sm text-gray-500 mb-4">Simulates a large 
language model response. Expects a prompt. May rarely return an intentional 
hallucination (error rate: 10%).</p>
                    <textarea id="prompt-input" rows="3" class="w-full p-3 border 
border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm" 
placeholder="e.g., Explain the concept of quantum entanglement."></textarea>
                    <button onclick="callEndpoint('generate_text')" class="mt-3 w-full 
bg-primary text-white py-2 rounded-lg font-semibold hover:bg-indigo-600 
transition duration-150 shadow-md">
                        Generate Text
                    </button>
                </div>
                <!-- Endpoint 2: Sentiment Analysis -->
                <div id="card-analyze-sentiment" class="bg-card p-6 rounded-xl 
shadow-lg border border-gray-100">
                    <h2 class="text-xl font-semibold text-secondary mb-3">2. /api/
 analyze_sentiment</h2>
                    <p class="text-sm text-gray-500 mb-4">Analyzes sentiment of 
text input. Returns a structured JSON object.</p>
                    <input type="text" id="sentiment-input" class="w-full p-3 border 
border-gray-300 rounded-lg focus:ring-secondary focus:border-secondary 
text-sm" placeholder="e.g., I love testing tools!">
                    <button onclick="callEndpoint('analyze_sentiment')" class="mt-3 
w-full bg-secondary text-white py-2 rounded-lg font-semibold hover:bg
emerald-600 transition duration-150 shadow-md">
                        Analyze Sentiment
                    </button>
                </div>
                
                <!-- Endpoint 3: Structured Data Retrieval (Schema Test) -->
                <div id="card-structured-response" class="bg-card p-6 rounded-xl 
shadow-lg border border-gray-100">
                    <h2 class="text-xl font-semibold text-red-500 mb-3">3. /api/
 structured_response</h2>
                    <p class="text-sm text-gray-500 mb-4">Returns a fixed JSON 
schema containing a list of objects, testing data validation and schema 
adherence.</p>
                    <button onclick="callEndpoint('structured_response')" 
class="mt-3 w-full bg-red-500 text-white py-2 rounded-lg font-semibold 
hover:bg-red-600 transition duration-150 shadow-md">
                        Get Structured Data
                    </button>
                </div>
            </div>
            <!-- API Response Display -->
            <div class="lg:col-span-1">
                <div class="bg-white p-6 rounded-xl shadow-2xl border border
gray-200 sticky top-4">
                    <h2 class="text-2xl font-bold text-gray-900 mb-4 flex items
center">
                        <svg class="w-6 h-6 mr-2 text-gray-500" fill="none" 
stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/
 svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                        API Response Console
                    </h2>
                    <!-- Loading Indicator -->
                    <div id="loading-indicator" class="hidden text-center py-8 text
gray-500">
                        <div class="flex justify-center space-x-1 mb-2">
                            <span class="loading-dot w-2 h-2 bg-primary rounded
full"></span>
                            <span class="loading-dot w-2 h-2 bg-primary rounded
full"></span>
                            <span class="loading-dot w-2 h-2 bg-primary rounded
full"></span>
                        </div>
                        <p>Processing Request...</p>
                    </div>
                    <!-- Status Display -->
                    <div id="status-display" class="p-3 mb-4 rounded-lg text-sm font
medium hidden"></div>
                    <!-- Response Body -->
                    <pre id="response-body" class="bg-gray-800 text-green-300 p-4 
rounded-lg text-xs overflow-x-auto whitespace-pre-wrap"></pre>
                </div>
            </div>
        </main>
    </div>
    <script>
        // Global state for simplicity
        let isFetching = false;
        
        // DOM elements
        const loadingIndicator = document.getElementById('loading-indicator');
        const responseBody = document.getElementById('response-body');
        const statusDisplay = document.getElementById('status-display');
        const endpointButtons = document.querySelectorAll('button');
        /**
         * Clears the console and sets the loading state.
         */
        function setLoading(isLoading) {
            isFetching = isLoading;
            endpointButtons.forEach(btn => btn.disabled = isLoading);
            
            if (isLoading) {
                responseBody.textContent = '';
                statusDisplay.classList.add('hidden');
                loadingIndicator.classList.remove('hidden');
            } else {
                loadingIndicator.classList.add('hidden');
            }
        }
        /**
         * Displays the result in the console.
         * @param {number} status - HTTP status code.
         * @param {object} data - The response data object.
         */
        function displayResponse(status, data) {
            const isSuccess = status >= 200 && status < 300;
            
            statusDisplay.textContent = `Status: ${status} (${isSuccess ? 'OK' : 'Error'})`;
            statusDisplay.classList.remove('hidden', 'bg-green-100', 'textgreen-800', 'bg-red-100', 'text-red-800');
            
            if (isSuccess) {
                statusDisplay.classList.add('bg-green-100', 'text-green-800');
            } else {
                statusDisplay.classList.add('bg-red-100', 'text-red-800');
            }
            responseBody.textContent = JSON.stringify(data, null, 2);
        }
        
        /**
         * Simulates a network delay.
         * @param {number} min - Minimum delay in ms.
         * @param {number} max - Maximum delay in ms.
         * @returns {Promise<void>}
         */
        function mockDelay(min = 800, max = 2500) {
            const delay = Math.random() * (max - min) + min;
            return new Promise(resolve => setTimeout(resolve, delay));
        }
        // --- Mock API Endpoint Handlers --
        /**
         * Mock handler for /api/generate_text
         */
        async function mockGenerateText() {
            const prompt = document.getElementById('prompt-input').value || 
"What is the capital of France?";
            const latency = mockDelay(1000, 3000);
            
            // 10% chance of a mock "hallucination" error
            if (Math.random() < 0.1) {
                await latency;
                return { 
                    status: 500, 
                    data: { 
                        error: "Model Hallucination Detected", 
                        message: "The model returned inaccurate information, e.g., 'The capital of France is Mars.'",
                        prompt: prompt
                    }
                };
            }
            
            const responseText = 
                `API_RESPONSE: The request received for the prompt: "${prompt}". 
                \n\nGenerated Content: Quantum entanglement is a physical 
phenomenon that occurs when two or more particles are linked in such a way 
that they share the same fate, regardless of the distance separating them. 
Measuring the property of one particle instantly influences the property of the 
other, defying classical intuition about locality. This concept is central to 
quantum computing.`;
            await latency;
            return {
                status: 200,
                data: {
                    generated_text: responseText,
                    token_count: responseText.length / 5, // Mock token count
                    model: "gemini-mock-2.5-flash",
                    timestamp: new Date().toISOString()
                }
            };
        }
        /**
         * Mock handler for /api/analyze_sentiment
         */
        async function mockAnalyzeSentiment() {
            const text = document.getElementById('sentiment-input').value || "This tool is great, but the colors are too bright.";
            await mockDelay(500, 1500);
            let label, score;
            const random = Math.random();
            if (random < 0.2) {
                label = "NEGATIVE";
                score = (Math.random() * 0.2 + 0.8).toFixed(4);
            } else if (random < 0.6) {
                label = "NEUTRAL";
                score = (Math.random() * 0.4 + 0.3).toFixed(4);
            } else {
                label = "POSITIVE";
                score = (Math.random() * 0.2 + 0.8).toFixed(4);
            }
            // Rare case: return a malformed number (e.g. string instead of float) for testing strict schema validation
            if (Math.random() < 0.05) {
                return {
                    status: 200,
                    data: {
                        input_text: text,
                        sentiment: "MALFORMED_DATA",
                        // Intentional error for testing: score should be a float, but is a string with non-numeric character
                        confidence_score: score + 'a', 
                        // Missing the 'label' field entirely
                    }
                };
            }
            
            return {
                status: 200,
                data: {
                    input_text: text,
                    label: label,
                    confidence_score: parseFloat(score),
                    service_version: "v1.1.2"
                }
            };
        }
        /**
         * Mock handler for /api/structured_response
         */
        async function mockStructuredResponse() {
            await mockDelay(700, 1800);
            const data = {
                catalog_id: "CAT-9001",
                total_items: 3,
                products: [
                    {
                        product_id: "P-4321",
                        name: "Quantum Debugger Kit",
                        category: "Tools",
                        price: 199.99,
                        in_stock: true,
                        tags: ["debug", "testing", "ai"]
                    },
                    {
                        product_id: "P-5500",
                        name: "Synthetic Data Generator",
                        category: "Software",
                        price: 49.50,
                        in_stock: true,
                        tags: ["data", "ml", "automation"]
                    },
                    {
                        product_id: "P-1010",
                        name: "Ethical AI Guideline Handbook",
                        category: "Book",
                        price: 25.00,
                        in_stock: false,
                        tags: ["ethics", "policy"]
                    }
                ],
                last_updated: new Date().toISOString()
            };
            return { status: 200, data: data };
        }
        // --- Main Controller Function --
        /**
         * Universal function to call a mock API endpoint.
         * @param {string} endpointName - The name of the endpoint to call.
         */
        async function callEndpoint(endpointName) {
            if (isFetching) return;
            setLoading(true);
            let result;
            try {
                switch (endpointName) {
                    case 'generate_text':
                        result = await mockGenerateText();
                        break;
                    case 'analyze_sentiment':
                        result = await mockAnalyzeSentiment();
                        break;
                    case 'structured_response':
                        result = await mockStructuredResponse();
                        break;
                    default:
                        result = { status: 404, data: { error: "Endpoint Not Found", 
message: `The endpoint /api/${endpointName} does not exist.` } };
                        break;
                }
            } catch (error) {
                console.error("API Mock Error:", error);
                result = { status: 500, data: { error: "Internal Client Error", message: 
error.message } };
            } finally {
                setLoading(false);
            }
 displayResponse(result.status, result.data);
        }
    </script>
 </body>
 </html>